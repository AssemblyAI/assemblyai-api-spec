---
title: "Migration guide: Speechmatics to AssemblyAI"
---

This guide walks through the process of migrating from **Speechmatics** to **AssemblyAI** for streaming Speech-to-text.

### Get started

Before we begin, make sure you have an AssemblyAI account and an API key. You can [sign up](https://assemblyai.com/dashboard/signup) for a free account and get your API key from your dashboard.

## Side-by-side code comparison

Below is a side-by-side comparison of a basic Python code snippet to transcribe streaming audio by Speechmatics and AssemblyAI.

<Tabs groupId="language">
<Tab language="speechmatics" title="Speechmatics">
<Code src="../../../../snippets/guides/cookbooks/streaming-stt/speechmatics_to_aai_streaming/python-1.py" />
</Tab>
<Tab language="aai" title="AssemblyAI">

Install the required Python packages:

```bash
pip install websocket-client pyaudio
```

</Tab>
</Tabs>

</Step>
</Steps>

## Step 2: Configure the API key

In this step, you'll configure your API key to authenticate your requests.

<Steps>
<Step>
<Tabs groupId="language">
<Tab language="speechmatics" title="Speechmatics">
  Navigate to [API Keys](https://portal.speechmatics.com/settings/api-keys) in your account settings and copy your API key.
</Tab>
<Tab language="aai" title="AssemblyAI">
  Navigate to [API Keys](https://www.assemblyai.com/dashboard/api-keys) in your account dashboard and copy your API key.
</Tab>
</Tabs>
</Step>

<Step>
<Tabs groupId="language">
<Tab language="speechmatics" title="Speechmatics">

Store your API key in a variable. Replace `<YOUR_API_KEY>` with your copied API key.

<Code src="../../../../snippets/guides/cookbooks/streaming-stt/speechmatics_to_aai_streaming/python-2.py" />
</Tab>
<Tab language="aai" title="AssemblyAI">

Store your API key in a variable. Replace `<YOUR_API_KEY>` with your copied API key.

<Code src="../../../../snippets/guides/cookbooks/streaming-stt/speechmatics_to_aai_streaming/python-3.py" />
</Tab>
</Tabs> 
</Step>

<Accordion title='Authenticate With A Temporary Token'>
  <Tabs groupId="language">
  <Tab language="speechmatics" title="Speechmatics">

<Code src="../../../../snippets/guides/cookbooks/streaming-stt/speechmatics_to_aai_streaming/python-4.py" />
  <Note title="Token usage">
    Instead of authorizing your request with `YOUR_API_KEY` (via request header), use the temporary token generated by this function when establishing the [WebSocket connection](/docs/guides/speechmatics_to_aai_streaming#step-1-4).
    ```python
      API_ENDPOINT= f"wss://eu2.rt.speechmatics.com/v2?jwt={generate_temp_token(api_key)}"
      ws_app = websocket.WebSocketApp(
        API_ENDPOINT,
        on_open=on_open,
        on_message=on_message,
        on_error=on_error,
        on_close=on_close,
      )
    ```
  </Note>
  </Tab>
  <Tab language="aai" title="AssemblyAI">
  ```python
  import requests
  from urllib.parse import urlencode

def generate_temp_token(api_key, expires_in_seconds=60):
"""Generate a temporary authentication token that expires after the specified time."""
url = "https://streaming.assemblyai.com/v3/token"

      response = requests.get(
          f"{url}?{urlencode({'expires_in_seconds': expires_in_seconds})}",
          headers={"Authorization": api_key}
      )
      data = response.json()
      return data.get("token")

````

<Note title="Token usage">
  Instead of authorizing your request with `YOUR_API_KEY` (via request header), use the temporary token generated by this function when establishing the [WebSocket connection](/docs/guides/speechmatics_to_aai_streaming#step-1-4).
  ```python
    API_ENDPOINT = f"{API_ENDPOINT_BASE_URL}?{urlencode(CONNECTION_PARAMS)}&token={generate_temp_token(api_key)}"
    ws_app = websocket.WebSocketApp(
      API_ENDPOINT,
      on_open=on_open,
      on_message=on_message,
      on_error=on_error,
      on_close=on_close,
    )
  ```
</Note>
</Tab>
</Tabs>
</Accordion>
</Steps>

## Step 3: Set up audio configuration

<Steps>
<Step>

Configure the audio settings for your microphone stream.
<Tabs groupId="language">
<Tab language="speechmatics" title="Speechmatics">
```python
import pyaudio

# Audio Configuration
FRAMES_PER_BUFFER = 1024  # Chunk size
SAMPLE_RATE = None  # Will be set based on device capabilities
CHANNELS = 1
FORMAT = pyaudio.paFloat32  # Speechmatics uses float32 format

# Global variables for audio stream and websocket
audio = None
stream = None
ws_app = None
audio_thread = None
stop_event = threading.Event()  # To signal the audio thread to stop
audio_seq_no = 0  # Track number of audio chunks sent

def run():
  global audio, stream, ws_app, SAMPLE_RATE

  # Initialize PyAudio
  audio = pyaudio.PyAudio()

  # Get default input device (can alter to specify specific device)
  default_device = audio.get_default_input_device_info()
  device_index = default_device['index']
  SAMPLE_RATE = int(audio.get_device_info_by_index(device_index)['defaultSampleRate'])

  print(f"Using microphone: {default_device['name']}")

  # Open microphone stream
  try:
      stream = audio.open(
          input=True,
          frames_per_buffer=FRAMES_PER_BUFFER,
          channels=CHANNELS,
          format=FORMAT,
          rate=SAMPLE_RATE,
          input_device_index=device_index
      )
      print("Microphone stream opened successfully.")
      print("Speak into your microphone. Press Ctrl+C to stop.")
  except Exception as e:
      print(f"Error opening microphone stream: {e}")
      if audio:
          audio.terminate()
      return  # Exit if microphone cannot be opened
````

<Tip title="Sample rate">
**Speechmatics** recommends using a `16 kHz` sample rate for speech audio. Anything higher will be downsampled server-side.
</Tip>
</Tab>
<Tab language="aai" title="AssemblyAI">
<Code src="../../../../snippets/guides/cookbooks/streaming-stt/speechmatics_to_aai_streaming/python-5.py" />
</Tab>
<Tab language="aai" title="AssemblyAI">
<Code src="../../../../snippets/guides/cookbooks/streaming-stt/speechmatics_to_aai_streaming/python-6.py" />
</Tab>
</Tabs>

## Next steps

To learn more about both Streaming APIs, their key differences, and how to best migrate, see the following resources:

**AssemblyAI**

- [Streaming Speech-to-Text](/docs/speech-to-text/streaming)
- [Streaming API reference](https://assemblyai.com/docs/api-reference/streaming)

**Speechmatics**

- [Transcribe in Real-Time](https://docs.speechmatics.com/introduction/rt-guide)
- [Using Microphone Input](https://docs.speechmatics.com/tutorials/using-mic)
- [Real-Time API Reference](https://docs.speechmatics.com/rt-api-ref)

## Need some help?

If you get stuck or have any other questions, contact our support team at `support@assemblyai.com` or create a [support ticket](https://www.assemblyai.com/contact/support).
