---
title: "Generate Custom Speaker Labels with Pyannote"
---

In this guide, we'll show you how to generate Speaker Labels using Pyannote with an AssemblyAI transcript. This can be used to generate Speaker Labels for languages we currently do not support for speaker labelling.

## Quickstart

<Code src="snippets/guides/cookbooks/core-transcription/Use_AssemblyAI_with_Pyannote_to_generate_custom_Speaker_Labels/python-1.py" />
### Get Started

Before we begin, make sure you have an AssemblyAI account and an API key. You can [sign up](https://assemblyai.com/dashboard/signup) for a free account and get your API key from your dashboard.

You'll also need a HuggingFace account and API key. You can [sign up](https://huggingface.co/join) for a free account and get your API key [here](https://huggingface.co/settings/tokens). Create a **Read** type API token to ensure the necessary permissions are enabled.

<Info>
  Browse to the
  [speaker-diarization](https://huggingface.co/pyannote/speaker-diarization) and
  [segmentation](https://huggingface.co/pyannote/segmentation) model pages and
  accept the **Gated Model** Terms & Conditions by entering your
  **Company/University**, **Website** and **Use Case** details in order to gain
  access to the use of these models.
</Info>

### Step-by-Step Instructions

Install the necessary dependencies.

```bash
pip install assemblyai pyannote.audio torch pandas numpy
```

Import the necessary dependencies, assign your API keys and authenticate with AssemblyAI.

<Code src="snippets/guides/cookbooks/core-transcription/Use_AssemblyAI_with_Pyannote_to_generate_custom_Speaker_Labels/python-2.py" />
Create the `transcribe_audio` function, this will handle the transcription
process with AssemblyAI.

<Code src="snippets/guides/cookbooks/core-transcription/Use_AssemblyAI_with_Pyannote_to_generate_custom_Speaker_Labels/python-3.py" />
Create the `get_speaker_labels`function, this will handle the speaker
diarization model processing to generate the custom speaker labels for the
transcript.

Firstly, it initializes and applies the pipeline to the audio file.

Secondly, it processes the diarization results and converts the speaker segments into a DataFrame so we can compare the results with the transcript.

Lastly, the speaker segments are compared and assigned to the words and sentences of the transcript to create the speaker labelled transcript.

<Code src="snippets/guides/cookbooks/core-transcription/Use_AssemblyAI_with_Pyannote_to_generate_custom_Speaker_Labels/python-4.py" />
<Accordion title="How can I set the number of speakers?">

If you know the number of speakers in advance, you can use the `num_speakers` parameter to set the number of speakers:

```python
# Apply the pipeline to the audio file
diarization = pipeline(audio_file, num_speakers=4)
```

You can also provide upper/lower bands on the number of speakers using the `min_speakers` and `max_speakers` parameters:

```python
# Apply the pipeline to the audio file
diarization = pipeline(audio_file, min_speakers=2, max_speakers=5)
```

</Accordion>

Create the `format_timestamp`, this will handle the timestamps conversion to improve the readability of the final speaker labelled transcript.

<Code src="snippets/guides/cookbooks/core-transcription/Use_AssemblyAI_with_Pyannote_to_generate_custom_Speaker_Labels/python-5.py" />
Finally, select a local file and call the functions to generate and print your
custom Speaker Labelled transcript.

<Code src="snippets/guides/cookbooks/core-transcription/Use_AssemblyAI_with_Pyannote_to_generate_custom_Speaker_Labels/python-6.py" />
Here's an example speaker labelled output from a Croatian file:

```
[00:00:05] SPEAKER 04: Nalazimo se u Centro Zagreba, u parku Zrinjevac, gdje je kao što vidite jako ljepo, vreme je prekrasno, a danas ćemo ljude pitati što im se sviđa u Zagrebu ili što im se možda ne sviđa u Zagrebu.

[00:00:42] SPEAKER 04: Dobar dan, može jednokratko pitanje samo.

[00:00:46] SPEAKER 04: Može?

[00:00:48] SPEAKER 04: Evo lako, što vam se najviše sviđa u Zagrebu?

[00:00:50] SPEAKER 07: Što mi se najviše sviđa u Zagrebu?

[00:00:53] SPEAKER 07: E sad, teško pitanje, ali trenutno mi se najviše sviđa što nije klasična jesen, nego više prođeče u zraku.

[00:01:06] SPEAKER 07: Dobre.

[00:01:09] SPEAKER 07: Može sigurnost još uvijek s osišam sigurno u Zagrebu.

[00:01:13] SPEAKER 04: I po noći?

[00:01:15] SPEAKER 07: Pa po noći ne šetam baš toliko po noći, ali centar grada mi je dosta siguran, osvijetljen i to mi je okej.
```
