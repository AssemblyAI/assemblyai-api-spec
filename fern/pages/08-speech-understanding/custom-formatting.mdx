---
title: "Custom Formatting"
description: "Automatically format dates, phone numbers, emails, and more in your transcripts"
hidden: true
---

<AccordionGroup>

<Accordion title="Supported regions">
  US only <br />
</Accordion>

</AccordionGroup>

## Overview

The Custom Formatting feature automatically standardizes and formats specific types of information in your transcripts, ensuring consistency across dates, phone numbers, emails, and other data types. This eliminates the need for post-processing and provides clean, formatted output ready for your application.

**Key capabilities:**
- Format dates in your preferred style (US, European, ISO, etc.)
- Standardize phone number formats with custom patterns
- Control currency and decimal precision
- Convert spelled-out text into formatted patterns
- Format URLs as hyperlinks
- Apply multiple formatting rules simultaneously

**Common use cases:**
- Standardizing contact information in customer service transcripts
- Formatting financial data in earnings calls
- Preparing transcripts for CRM systems with specific format requirements
- Creating consistent documentation from meetings
- Processing legal or medical transcripts with strict formatting standards

## Quickstart

There are two ways to use Custom Formatting:

1. **Transcribe and format in one request** - Best when you're starting a new transcription and want to automatically format the transcript text as part of that process
2. **Transcribe and format in separate requests** - Best when you already have text that you would like to format or for more complicated workflows where you want to separate the transcription and formatting tasks

### Method 1: Transcribe and format in one request

This method is ideal when you're starting fresh and want both transcription and formatting in a single workflow.

<Tabs groupId="language">
<Tab language="python" title="Python" default>

```python
import requests
import time

base_url = "https://api.assemblyai.com"

headers = {
  "authorization": "YOUR_API_KEY"
}

# Upload your audio file (optional - skip if using a public URL)
# with open("./my-audio.mp3", "rb") as f:
#   response = requests.post(base_url + "/v2/upload", headers=headers, data=f)
#   audio_url = response.json()["upload_url"]

# Or use a publicly-accessible URL
audio_url = "https://assembly.ai/wildfires.mp3"

# Configure transcription with custom formatting
data = {
  "audio_url": audio_url,
  "speech_understanding": {
    "request": {
      "custom_formatting": {
        "date": "mm/dd/yyyy",
        "phone_number": "(xxx)xxx-xxxx",
        "email": "username@domain.com"
      }
    }
  }
}

# Submit transcription request
response = requests.post(base_url + "/v2/transcript", headers=headers, json=data)
transcript_id = response.json()["id"]
polling_endpoint = base_url + f"/v2/transcript/{transcript_id}"

# Poll for transcription results
while True:
  transcript = requests.get(polling_endpoint, headers=headers).json()

  if transcript["status"] == "completed":
    break

  elif transcript["status"] == "error":
    raise RuntimeError(f"Transcription failed: {transcript['error']}")

  else:
    time.sleep(3)

# Access and display results
print("\n--- Formatted Transcript ---")
print(transcript['text'])

print("\n--- Formatting Details ---")
mapping = transcript['speech_understanding']['response']['custom_formatting']['mapping']
for original, formatted in mapping.items():
  print(f"Original: {original}")
  print(f"Formatted: {formatted}\n")
```

**Expected output:**
```
Transcription started. ID: b26e8d28-976a-43b5-b90f-52b8a6b51ca6
Status: processing. Waiting...
Transcription and formatting completed!

--- Formatted Transcript ---
I was born on 09/19/1991. You would write that date as 09/19/1991 in the USA, but in many other countries you might write September 19, 1991 as 19/09/1991.

--- Formatting Details ---
Original: September 19, 1991
Formatted: 09/19/1991
```

</Tab>
</Tabs>

### Method 2: Transcribe and format in separate requests

This method is useful when you already have text that you would like to format or for more complicated workflows where you want to separate the transcription and formatting tasks.

<Tabs groupId="language">
<Tab language="python" title="Python" default>

```python
import requests
import time

base_url = "https://api.assemblyai.com"

headers = {
  "authorization": "YOUR_API_KEY"
}

# Upload your audio file (optional - skip if using a public URL)
# with open("./my-audio.mp3", "rb") as f:
#   response = requests.post(base_url + "/v2/upload", headers=headers, data=f)
#   audio_url = response.json()["upload_url"]

# Or use a publicly-accessible URL
audio_url = "https://cdn.assemblyai.com/upload/80a5fd91-8347-48d5-b24c-2fa4c66e55f5"

# Step 1: Submit transcription request (without formatting)
data = {
  "audio_url": audio_url,
  "speaker_labels": True  # Optional: enable speaker diarization
}

response = requests.post(base_url + "/v2/transcript", headers=headers, json=data)
transcript_id = response.json()["id"]
polling_endpoint = base_url + f"/v2/transcript/{transcript_id}"

print(f"Transcription started. ID: {transcript_id}")

# Step 2: Poll for transcription completion
while True:
  transcript = requests.get(polling_endpoint, headers=headers).json()

  if transcript["status"] == "completed":
    print("Transcription completed!")
    break

  elif transcript["status"] == "error":
    raise RuntimeError(f"Transcription failed: {transcript['error']}")

  else:
    print(f"Status: {transcript['status']}. Waiting...")
    time.sleep(3)

# Step 3: Add custom formatting configuration to the completed transcript
transcript["speech_understanding"] = {
  "request": {
    "custom_formatting": {
      "date": "mm/dd/yyyy",
      "phone_number": "(xxx)xxx-xxxx",
      "email": "username@domain.com"
    }
  }
}

print("Requesting custom formatting...")

# Step 4: Send to Speech Understanding API for formatting
result = requests.post(
  "https://llm-gateway.assemblyai.com/v1/understanding",
  headers=headers,
  json=transcript
).json()

print("Formatting completed!")

# Access and display results
print("\n--- Formatted Transcript ---")
print(result['text'])

print("\n--- Formatting Details ---")
mapping = result['speech_understanding']['response']['custom_formatting']['mapping']
for original, formatted in mapping.items():
  print(f"Original: {original}")
  print(f"Formatted: {formatted}\n")
```

**Expected output:**
```
Transcription started. ID: 93d2a66b-e222-452d-96e6-98cf7f8c040b
Status: processing. Waiting...
Transcription completed!
Requesting custom formatting...
Formatting completed!

--- Formatted Transcript ---
My phone number is (555)679-3466. My fax number is (555)872-3399. My telephone number is (702)280-3784. My fax number is (901)666-5423.

--- Formatting Details ---
Original: My phone number is 555-679-3466. My fax number is 555-872-3399. My telephone number is 702-280-3784. My fax number is 901-666-5423.
Formatted: My phone number is (555)679-3466. My fax number is (555)872-3399. My telephone number is (702)280-3784. My fax number is (901)666-5423.
```

</Tab>
</Tabs>

## Output format

The Custom Formatting API returns formatted text in the standard `text` field of the response, with the formatting applied automatically. The `speech_understanding` object contains details about what was formatted.

**Example response structure:**

```json
{
  "id": "b26e8d28-976a-43b5-b90f-52b8a6b51ca6",
  "status": "completed",
  "text": "I was born on 09/19/1991. You would write that date as 09/19/1991 in the USA...",
  "speech_understanding": {
    "request": {
      "custom_formatting": {
        "date": "mm/dd/yyyy",
        "phone_number": "(xxx)xxx-xxxx",
        "email": "username@domain.com"
      }
    },
    "response": {
      "custom_formatting": {
        "mapping": {
          "September 19, 1991": "09/19/1991"
        },
        "status": "success"
      }
    }
  }
}
```

## API reference

### Request

#### Method 1: Transcribe and format in one request

When creating a new transcription, include the `speech_understanding` parameter directly in your transcription request:

```bash
curl -X POST \
  "https://api.assemblyai.com/v2/transcript" \
  -H "Authorization: YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "audio_url": "https://assembly.ai/wildfires.mp3",
    "speech_understanding": {
      "request": {
        "custom_formatting": {
          "date": "mm/dd/yyyy",
          "phone_number": "(xxx)xxx-xxxx",
          "email": "username@domain.com",
          "currency": "$",
          "decimals": "2",
          "address": "full",
          "links": "hyperlink",
          "spelling": "letters"
        }
      }
    }
  }'
```

#### Method 2: Add formatting to existing transcripts

For existing transcripts, retrieve the completed transcript and send it to the Speech Understanding API:

```bash {6} maxLines=15
# Step 1: Get the completed transcript
transcript=$(curl -s -X GET \
  "https://api.assemblyai.com/v2/transcript/YOUR_TRANSCRIPT_ID" \
  -H "Authorization: YOUR_API_KEY")

# Step 2: Add custom formatting and send to Speech Understanding API
curl -X POST \
  "https://llm-gateway.assemblyai.com/v1/understanding" \
  -H "Authorization: YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d "$(echo "$transcript" | jq '. + {
    "speech_understanding": {
      "request": {
        "custom_formatting": {
          "date": "mm/dd/yyyy",
          "phone_number": "(xxx)xxx-xxxx",
          "email": "username@domain.com"
        }
      }
    }
  }')"
```

| Key                                          | Type    | Required? | Description                                                                                                                      |
| -------------------------------------------- | ------- | --------- | -------------------------------------------------------------------------------------------------------------------------------- |
| `speech_understanding`                       | object  | Yes       | Container for speech understanding requests.                                                                                     |
| `speech_understanding.request`               | object  | Yes       | The understanding request configuration.                                                                                         |
| `speech_understanding.request.custom_formatting`   | object  | Yes       | Custom formatting configuration.                                                                                         |
| `custom_formatting.date`               | string   | No       | Date format pattern. Common patterns: `mm/dd/yyyy` (US), `dd/mm/yyyy` (European), `yyyy-mm-dd` (ISO).        |
| `custom_formatting.phone_number`                         | string | No        | Phone number format pattern. Examples: `(xxx)xxx-xxxx`, `xxx-xxx-xxxx`, `xxx.xxx.xxxx`.    |
| `custom_formatting.email`                         | string | No        | Email format pattern. Example: `username@domain.com`.    |
| `custom_formatting.currency`                         | string | No        | Currency symbol to use. Example: `$`, `€`, `£`. Treats all currencies with the specified symbol.    |
| `custom_formatting.decimals`                         | string | No        | Number of decimal places to round to. Example: `2` for two decimal places.    |
| `custom_formatting.address`                         | string | No        | Address formatting style. Use `full` for complete details or `short` for abbreviations.    |
| `custom_formatting.links`                         | string | No        | URL formatting. Use `hyperlink` to format URLs as clickable links.    |
| `custom_formatting.spelling`                         | string | No        | Spelling format. Use `letters` to format spelled-out words (e.g., L-E-T-T-E-R).    |

### Response

The Custom Formatting API returns your original transcript response with formatting applied to the `text` field and additional formatting details in the `speech_understanding` object.

```json
{
  "id": "93d2a66b-e222-452d-96e6-98cf7f8c040b",
  "status": "completed",
  "text": "My phone number is (555)679-3466. My fax number is (555)872-3399. My telephone number is (702)280-3784. My fax number is (901)666-5423.",
  "speech_understanding": {
    "request": {
      "custom_formatting": {
        "date": "mm/dd/yyyy",
        "phone_number": "(xxx)xxx-xxxx",
        "email": "username@domain.com"
      }
    },
    "response": {
      "custom_formatting": {
        "mapping": {
          "My phone number is 555-679-3466. My fax number is 555-872-3399. My telephone number is 702-280-3784. My fax number is 901-666-5423.": "My phone number is (555)679-3466. My fax number is (555)872-3399. My telephone number is (702)280-3784. My fax number is (901)666-5423."
        },
        "status": "success"
      }
    }
  }
}
```

| Key                                           | Type   | Description                                                                                                                          |
| --------------------------------------------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------ |
| `text`                            | string | The transcript text with custom formatting applied. |
| `speech_understanding`                        | object | Container for speech understanding request and response information.                                                                 |
| `speech_understanding.request`                | object | The original custom formatting request configuration that was submitted.                                                                   |
| `speech_understanding.request.custom_formatting`    | object | The formatting parameters that were used.                                                                                           |
| `speech_understanding.response`               | object | The response information from the formatting process.                                                                               |
| `speech_understanding.response.custom_formatting`   | object | Details about the formatting operation.                                                                                            |
| `speech_understanding.response.custom_formatting.mapping` | object | An object showing the original text segments and their formatted versions. Keys are original text, values are formatted text. |
| `speech_understanding.response.custom_formatting.status` | string | The status of the formatting operation. Will be `"success"` when formatting completes successfully.                                          |

#### Key differences from standard transcription

| Field | Standard Transcription | With Custom Formatting |
|-------|------------------------|------------------------|
| `text` | Transcribed text with default formatting | Transcribed text with your custom formatting rules applied |
| `speech_understanding` | Not present | Object containing the formatting request and response details with mapping of changes |

All other fields from the original transcript (`words`, `utterances`, `confidence`, etc.) remain unchanged.

## Common formatting patterns

### Date formats

| Pattern | Example Output | Description |
|---------|---------------|-------------|
| `mm/dd/yyyy` | 09/19/1991 | US format (month/day/year) |
| `dd/mm/yyyy` | 19/09/1991 | European format (day/month/year) |
| `yyyy-mm-dd` | 1991-09-19 | ISO 8601 format |
| `mm-dd-yyyy` | 09-19-1991 | US format with dashes |
| `dd.mm.yyyy` | 19.09.1991 | European format with dots |

### Phone number formats

| Pattern | Example Output | Description |
|---------|---------------|-------------|
| `(xxx)xxx-xxxx` | (555)679-3466 | Parentheses and dash |
| `xxx-xxx-xxxx` | 555-679-3466 | Dashes only |
| `xxx.xxx.xxxx` | 555.679.3466 | Dots separator |
| `+x(xxx)xxx-xxxx` | +1(555)679-3466 | International format |

### Email formats

| Pattern | Example Output |
|---------|---------------|
| `username@domain.com` | john.doe@example.com |
| `firstname.lastname@domain.com` | john.doe@company.com |

## Best practices

1. **Choose appropriate formats**: Select formatting patterns that match your application's requirements and regional standards.

2. **Combine formatting rules**: You can apply multiple formatting rules simultaneously for comprehensive text standardization.

3. **Test with sample data**: Verify your formatting patterns work correctly with representative audio samples before processing large batches.

4. **Review the mapping**: Check the `mapping` object in the response to see exactly what was changed and verify the results.

5. **Consider regional differences**: Be mindful of date and phone number format differences when processing international content.